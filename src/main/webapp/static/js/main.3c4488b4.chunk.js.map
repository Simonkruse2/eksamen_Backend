{"version":3,"sources":["apiFacade.js","App.js","index.js"],"names":["URL","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","facade","setToken","token","localStorage","setItem","getToken","getItem","getRole","jwtData","split","decodedJwtJsonData","window","atob","JSON","parse","roles","loggedIn","makeOptions","method","addToken","body","opts","headers","Accept","stringify","login","user","password","options","username","fetch","then","logout","removeItem","fetchData","fetchCreateWeekPlan","weekPlan","fetchAllWeekPlans","getUser","fetchAllRecipes","fetchCreateEditRecipe","recipeDTO","id","fetchRecipeById","apiFacade","LogIn","useState","loginCredentials","setLoginCredentials","onChange","evt","target","value","placeholder","type","onClick","preventDefault","Logout","LoggedIn","HeaderStart","className","exact","activeClassName","to","ContentStart","style","paddingLeft","path","Header","float","Content","Home","WeekPlans","listWeekPlans","setListWeekPlans","setListRecipe","setId","handleChangeId","event","name","Number","console","log","useEffect","didCancel","map","weekplans","key","uuid","weekPlanId","weekNo","year","recipes","recipe","Recipes","listRecipes","setListRecipes","setWeekPlan","preptime","directions","setRecipe","amount","ingredient","setIngredient","price","qty","itemDTO","setItemDTO","handleChangeAddToWeekPlan","ingredients","Edit","emptyRecipe","emptyIngredient","emptyItemDTO","handleChangeRecipe","handleChangeIngredient","handleChangeItemDTO","submitTitle","finalRecipe","NoMatch","App","setLoggedIn","history","useHistory","push","pass","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3c4488b4.chunk.js","sourcesContent":["const URL = \"http://localhost:8080/eksamen\";\r\n\r\nfunction handleHttpErrors(res) {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n}\r\n\r\nfunction apiFacade() {\r\n  const setToken = token => {\r\n    localStorage.setItem(\"jwtToken\", token);\r\n  };\r\n  const getToken = () => {\r\n    return localStorage.getItem(\"jwtToken\");\r\n  };\r\n  const getRole = () => {\r\n    let jwt = localStorage.getItem(\"jwtToken\");\r\n    let jwtData = jwt.split(\".\")[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    return decodedJwtData.roles;\r\n  };\r\n\r\n  const getUser = () => {\r\n    let jwt = localStorage.getItem(\"jwtToken\");\r\n    let jwtData = jwt.split(\".\")[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    return decodedJwtData;\r\n  };\r\n  const loggedIn = () => {\r\n    const loggedIn = getToken() != null;\r\n    return loggedIn;\r\n  };\r\n  const logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  };\r\n\r\n  const login = (user, password) => {\r\n    const options = makeOptions(\"POST\", true, {\r\n      username: user,\r\n      password: password\r\n    });\r\n    return fetch(URL + \"/api/login\", options)\r\n      .then(handleHttpErrors)\r\n      .then(res => {\r\n        setToken(res.token);\r\n      });\r\n  };\r\n\r\n  const fetchData = () => {\r\n    const options = makeOptions(\"GET\", true); //True add's the token\r\n    if (getRole() === \"admin\") {\r\n      return fetch(URL + \"/api/info/admin\", options).then(handleHttpErrors);\r\n    }\r\n    return fetch(URL + \"/api/info/user\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  const fetchCreateWeekPlan = (weekPlan) => {\r\n      const options = makeOptions(\"POST\", true, weekPlan);\r\n      return fetch(URL + \"/api/food/createWeekPlan/\", options).then(\r\n        handleHttpErrors\r\n      );\r\n      }\r\n  const fetchAllWeekPlans = () => {\r\n    const options = makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/food/allWeekPlans\", options).then(\r\n      handleHttpErrors\r\n    );\r\n  };\r\n\r\n  const fetchRecipeById = id => {\r\n    const options = makeOptions(\"GET\", true);\r\n    return fetch(URL + \"/api/food/find/\" + id, options).then(handleHttpErrors);\r\n  };\r\n\r\n  const fetchAllRecipes = () => {\r\n    const options = makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/food/all\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  const fetchCreateEditRecipe = (recipeDTO, id) => {\r\n    if (recipeDTO.id === 0) {\r\n      const options = makeOptions(\"POST\", true, recipeDTO);\r\n      return fetch(URL + \"/api/food/createRecipe/\", options).then(\r\n        handleHttpErrors\r\n      );\r\n    }\r\n    const options = makeOptions(\"PUT\", true, recipeDTO);\r\n    return fetch(URL + \"/api/food/editRecipe/\" + id, options).then(\r\n      handleHttpErrors\r\n    );\r\n  };\r\n\r\n  const makeOptions = (method, addToken, body) => {\r\n    var opts = {\r\n      method: method,\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    };\r\n    if (addToken && loggedIn()) {\r\n      opts.headers[\"x-access-token\"] = getToken();\r\n    }\r\n    if (body) {\r\n      opts.body = JSON.stringify(body);\r\n    }\r\n    return opts;\r\n  };\r\n  return {\r\n    makeOptions,\r\n    setToken,\r\n    getToken,\r\n    loggedIn,\r\n    login,\r\n    logout,\r\n    fetchData,\r\n    getRole,\r\n    fetchCreateWeekPlan,\r\n    fetchAllWeekPlans,\r\n    getUser,\r\n    fetchAllRecipes,\r\n    fetchCreateEditRecipe,\r\n    fetchRecipeById\r\n  };\r\n}\r\nconst facade = apiFacade();\r\nexport default facade;\r\n","import \"./App.css\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport uuid from \"uuid/v1\";\r\nimport facade from \"./apiFacade\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport {\r\n  Switch,\r\n  Route,\r\n  NavLink,\r\n  useHistory\r\n} from \"react-router-dom\";\r\n\r\nfunction App() {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  let history = useHistory();\r\n\r\n  const logout = () => {\r\n    facade.logout();\r\n    setLoggedIn(false);\r\n    history.push(\"/\");\r\n  };\r\n  const login = (user, pass) => {\r\n    facade.login(user, pass).then(res => setLoggedIn(true));\r\n    history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!loggedIn ? (\r\n        <div>\r\n          <HeaderStart />\r\n          <ContentStart login={login} />\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <LoggedIn logout={logout} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction LogIn({ login }) {\r\n  const init = { username: \"\", password: \"\" };\r\n  const [loginCredentials, setLoginCredentials] = useState(init);\r\n\r\n  const performLogin = evt => {\r\n    evt.preventDefault();\r\n    login(loginCredentials.username, loginCredentials.password);\r\n  };\r\n  const onChange = evt => {\r\n    setLoginCredentials({\r\n      ...loginCredentials,\r\n      [evt.target.id]: evt.target.value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onChange={onChange}>\r\n        <input placeholder=\"User Name\" id=\"username\" />\r\n        <input placeholder=\"Password\" id=\"password\" type=\"password\" />\r\n        <button onClick={performLogin}>Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nconst Logout = ({ logout }) => {\r\n  const handleLogout = () => {\r\n    logout();\r\n  };\r\n  return (\r\n    <div>\r\n      <h2>Logout</h2>\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction LoggedIn({ logout }) {\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <Content logout={logout} />\r\n    </div>\r\n  );\r\n}\r\nconst HeaderStart = () => {\r\n  return (\r\n    <ul className=\"header\">\r\n      <li>\r\n        <NavLink exact activeClassName=\"active\" to=\"/\">\r\n          Home\r\n        </NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink activeClassName=\"active\" to=\"/login\">\r\n          Login\r\n        </NavLink>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\nconst ContentStart = ({ login }) => {\r\n  return (\r\n    <div style={{ paddingLeft: 15 }}>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/login\">\r\n          <LogIn login={login} />\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <NoMatch />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\nconst Header = () => {\r\n  if (facade.getRole() === \"admin\") {\r\n    return (\r\n      <ul className=\"header\">\r\n        <li>\r\n          <NavLink exact activeClassName=\"active\" to=\"/\">\r\n            Home\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink activeClassName=\"active\" to=\"/recipes\">\r\n            Recipes\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink activeClassName=\"active\" to=\"/weekplans\">\r\n            Weekplans\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink activeClassName=\"active\" to=\"/edit\">\r\n            Edit\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink activeClassName=\"active\" to=\"/logout\">\r\n            Logout\r\n          </NavLink>\r\n        </li>\r\n        <li style={{ float: \"right\" }}>\r\n          <NavLink activeClassName=\"active\" to=\"/user-info\">\r\n            Hi {facade.getUser().username}! Role: {facade.getUser().roles}\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    );\r\n  }\r\n  return (\r\n    <ul className=\"header\">\r\n      <li>\r\n        <NavLink exact activeClassName=\"active\" to=\"/\">\r\n          Home\r\n        </NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink activeClassName=\"active\" to=\"/weekplans\">\r\n          Weekplans\r\n        </NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink activeClassName=\"active\" to=\"/recipes\">\r\n          Recipes\r\n        </NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink activeClassName=\"active\" to=\"/logout\">\r\n          Logout\r\n        </NavLink>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nconst Content = ({ logout }) => {\r\n  return (\r\n    <div style={{ paddingLeft: 15 }}>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/recipes\">\r\n          <Recipes />\r\n        </Route>\r\n        <Route path=\"/edit\">\r\n          <Edit />\r\n        </Route>\r\n        <Route path=\"/weekplans\">\r\n          <WeekPlans />\r\n        </Route>\r\n        <Route path=\"/logout\">\r\n          <Logout logout={logout} />\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <NoMatch />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div>\r\n      <h3>Welcome to home</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst WeekPlans = () => {\r\n  const [listWeekPlans, setListWeekPlans] = useState([]);\r\n  const [listRecipe, setListRecipe] = useState([0]);\r\n  const [id, setId] = useState([0]);\r\n\r\n  const handleChangeId = event => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = value.name;\r\n    setId(Number(value));\r\n    console.log(\"ID \" + id);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n    facade.fetchRecipeById(id).then(res => {\r\n      if (didCancel === false) {\r\n        setListRecipe(res);\r\n        console.log(\"Fetching Recipe complete\", res);\r\n      }\r\n    });\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n    facade.fetchAllWeekPlans().then(res => {\r\n      if (didCancel === false) {\r\n        setListWeekPlans(res);\r\n        console.log(\"Fetching WeekPlans complete\", res);\r\n      }\r\n    });\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n  }, []);\r\n  return (\r\n    <div style={{ paddingLeft: 20 }}>\r\n      <h3>Weekplans</h3>\r\n      {console.log(listWeekPlans)}\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Id</th>\r\n            <th>Week no.</th>\r\n            <th>Year</th>\r\n            <th>Recipe ID</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {listWeekPlans.map(weekplans => {\r\n            return (\r\n              <tr key={uuid}>\r\n                <td>{weekplans.weekPlanId}</td>\r\n                <td>{weekplans.weekNo}</td>\r\n                <td>{weekplans.year}</td>\r\n                <td>\r\n                  {weekplans.recipes.map(recipe => {\r\n                    return (\r\n                      <div>\r\n                        <button onClick={handleChangeId} value={recipe.id}>\r\n                          Click me for more info\r\n                        </button>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Recipes = () => {\r\n  const [listRecipes, setListRecipes] = useState([]);\r\n\r\n  // Jeg fik ikke det nedenstående til at virke\r\n  const [weekPlan, setWeekPlan] = useState([]);\r\n  const emptyRecipe = { id: \"\", name: \"\", preptime: \"\", directions: \"\" };\r\n  const emptyIngredient = { amount: \"\", id: \"\" };\r\n  const emptyItemDTO = { id: \"\", name: \"\", price: \"\", qty: \"\" };\r\n\r\n  const [recipe, setRecipe] = useState(emptyRecipe);\r\n  const [ingredient, setIngredient] = useState(emptyIngredient);\r\n  const [itemDTO, setItemDTO] = useState(emptyItemDTO);\r\n  const handleChangeAddToWeekPlan = event => {\r\n    event.preventDefault();\r\n    console.log(\"event.target.value\" + event.target.value);\r\n    facade.fetchRecipeById(event.target.value).then(res => {\r\n      setRecipe({\r\n        id: res.id,\r\n        name: res.name,\r\n        preptime: res.preptime,\r\n        directions: res.directions\r\n      });\r\n      setIngredient({\r\n        amount: res.ingredients[0].amount,\r\n        id: res.ingredients[0].id\r\n      });\r\n      setItemDTO({\r\n        id: res.ingredients[0].itemDTO.id,\r\n        name: res.ingredients[0].itemDTO.name,\r\n        price: res.ingredients[0].itemDTO.price,\r\n        qty: res.ingredients[0].itemDTO.qty\r\n      });\r\n    });\r\n    setWeekPlan(recipe, ingredient, itemDTO);\r\n  };\r\n  const handleChangeCreateWeekPlan = event => {\r\n    event.preventDefault();\r\n    console.log(\"WEEKPLAN\" + weekPlan);\r\n    facade.fetchCreateWeekPlan(weekPlan);\r\n  };\r\n  // Her til\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n    facade.fetchAllRecipes().then(res => {\r\n      if (didCancel === false) {\r\n        setListRecipes(res);\r\n        console.log(\"Fetching Recipes complete\", res);\r\n      }\r\n    });\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n  }, []);\r\n  return (\r\n    <div style={{ paddingLeft: 20 }}>\r\n      <h3>Delicious Recipes</h3>\r\n      {console.log(listRecipes)}\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Add to weekplan</th>\r\n            <th>Id</th>\r\n            <th>Name</th>\r\n            <th>Directions</th>\r\n            <th>Preptime</th>\r\n            <th>Ingredients</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {listRecipes.map(recipe => {\r\n            return (\r\n              <tr key={uuid}>\r\n                <button onClick={handleChangeAddToWeekPlan} value={recipe.id}>\r\n                  Click me\r\n                </button>\r\n                <td>{recipe.id}</td>\r\n                <td>{recipe.name}</td>\r\n                <td>{recipe.directions}</td>\r\n                <td>Approx. {recipe.preptime} Min.</td>\r\n                <td>\r\n                  {recipe.ingredients.map(ingredients => {\r\n                    return (\r\n                      ingredients.amount +\r\n                      \" gram \" +\r\n                      ingredients.itemDTO.name +\r\n                      \", \"\r\n                    );\r\n                  })}\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n          <button onClick={handleChangeCreateWeekPlan}>Save weekplan</button>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Edit = () => {\r\n  const emptyRecipe = { id: \"\", name: \"\", preptime: \"\", directions: \"\" };\r\n  const emptyIngredient = { amount: \"\", id: \"\" };\r\n  const emptyItemDTO = { id: \"\", name: \"\", price: \"\", qty: \"\" };\r\n  const [id, setId] = useState(0);\r\n\r\n  const [recipe, setRecipe] = useState(emptyRecipe);\r\n  const [ingredient, setIngredient] = useState(emptyIngredient);\r\n  const [itemDTO, setItemDTO] = useState(emptyItemDTO);\r\n\r\n  const handleChangeRecipe = event => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.id;\r\n    setRecipe({ ...recipe, [name]: value });\r\n  };\r\n  const handleChangeIngredient = event => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.id;\r\n    setIngredient({ ...ingredient, [name]: value });\r\n  };\r\n  const handleChangeItemDTO = event => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.id;\r\n    setItemDTO({ ...itemDTO, [name]: value });\r\n  };\r\n\r\n  const handleChangeId = event => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    setId(Number(value));\r\n    console.log(id);\r\n  };\r\n\r\n  const handleSubmitFind = event => {\r\n    event.preventDefault();\r\n    facade.fetchRecipeById(id).then(res => {\r\n      setRecipe({\r\n        id: res.id,\r\n        name: res.name,\r\n        preptime: res.preptime,\r\n        directions: res.directions\r\n      });\r\n      setIngredient({\r\n        amount: res.ingredients[0].amount,\r\n        id: res.ingredients[0].id\r\n      });\r\n\r\n      setItemDTO({\r\n        id: res.ingredients[0].itemDTO.id,\r\n        name: res.ingredients[0].itemDTO.name,\r\n        price: res.ingredients[0].itemDTO.price,\r\n        qty: res.ingredients[0].itemDTO.qty\r\n      });\r\n\r\n      console.log(res);\r\n    });\r\n  };\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    setRecipe({ ...emptyRecipe });\r\n    setIngredient({ ...emptyIngredient });\r\n    setItemDTO({ ...emptyItemDTO });\r\n\r\n    const finalRecipe = {\r\n      id: recipe.id,\r\n      name: recipe.name,\r\n      preptime: recipe.preptime,\r\n      directions: recipe.directions,\r\n      ingredients: [\r\n        {\r\n          amount: ingredient.amount,\r\n          id: 0,\r\n          itemDTO: {\r\n            id: 0,\r\n            name: itemDTO.name,\r\n            price: itemDTO.price,\r\n            qty: itemDTO.qty\r\n          }\r\n        }\r\n      ]\r\n    };\r\n    facade.fetchCreateEditRecipe(finalRecipe);\r\n    console.log(finalRecipe);\r\n  };\r\n\r\n  const submitTitle = recipe.id === null ? \"Submit\" : \"Save\";\r\n\r\n  return (\r\n    <div style={{ paddingLeft: 20 }}>\r\n      <h3>Find and Edit</h3>\r\n\r\n      <input onChange={handleChangeId} placeholder=\"Find Recipe by Id\"></input>\r\n      <button onClick={handleSubmitFind}>Find Recipe</button>\r\n\r\n      <br />\r\n      <input\r\n        id=\"name\"\r\n        value={recipe.name}\r\n        onChange={handleChangeRecipe}\r\n        placeholder=\"Add the recipes name\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"preptime\"\r\n        value={recipe.preptime}\r\n        onChange={handleChangeRecipe}\r\n        placeholder=\"Add approx preptime\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"directions\"\r\n        value={recipe.directions}\r\n        onChange={handleChangeRecipe}\r\n        placeholder=\"Add helpful directions\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"amount\"\r\n        value={ingredient.amount}\r\n        onChange={handleChangeIngredient}\r\n        placeholder=\"Add an amount\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"id\"\r\n        value={ingredient.id}\r\n        onChange={handleChangeIngredient}\r\n        placeholder=\"Edit the ingredient ID\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"id\"\r\n        value={itemDTO.id}\r\n        onChange={handleChangeItemDTO}\r\n        placeholder=\"Edit the item ID\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"name\"\r\n        value={itemDTO.name}\r\n        onChange={handleChangeItemDTO}\r\n        placeholder=\"Type the ingredients name \"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"price\"\r\n        value={itemDTO.price}\r\n        onChange={handleChangeItemDTO}\r\n        placeholder=\"Add a fitting price\"\r\n      ></input>\r\n      <br />\r\n      <input\r\n        id=\"qty\"\r\n        value={itemDTO.qty}\r\n        onChange={handleChangeItemDTO}\r\n        placeholder=\"Add a quantity\"\r\n      ></input>\r\n      <br />\r\n      <button onClick={handleSubmit}>{submitTitle}</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst NoMatch = () => <div>Urlen matcher ingen kendte routes</div>;\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\n\r\nconst AppWithRouter = () => {\r\n  return (\r\n    <div>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nReactDOM.render(<AppWithRouter />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}